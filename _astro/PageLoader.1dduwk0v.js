import{M as B,j as l,a as N,u as S,P as D,b as K,c as U,L as A,m as b}from"./proxy.DIf8mQQu.js";import{r as n}from"./index.DiEladB3.js";function T(e,o){if(typeof e=="function")return e(o);e!=null&&(e.current=o)}function F(...e){return o=>{let t=!1;const i=e.map(a=>{const r=T(a,o);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let a=0;a<i.length;a++){const r=i[a];typeof r=="function"?r():T(e[a],null)}}}}function G(...e){return n.useCallback(F(...e),e)}class V extends n.Component{getSnapshotBeforeUpdate(o){const t=this.props.childRef.current;if(t&&o.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const i=t.offsetParent,a=N(i)&&i.offsetWidth||0,r=N(i)&&i.offsetHeight||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=a-s.width-s.left,s.bottom=r-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function X({children:e,isPresent:o,anchorX:t,anchorY:i,root:a,pop:r}){const s=n.useId(),x=n.useRef(null),C=n.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:w}=n.useContext(B),d=e.props?.ref??e?.ref,v=G(x,d);return n.useInsertionEffect(()=>{const{width:u,height:h,top:p,left:g,right:y,bottom:E}=C.current;if(o||r===!1||!x.current||!u||!h)return;const M=t==="left"?`left: ${g}`:`right: ${y}`,L=i==="bottom"?`bottom: ${E}`:`top: ${p}`;x.current.dataset.motionPopId=s;const f=document.createElement("style");w&&(f.nonce=w);const R=a??document.head;return R.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${M}px !important;
            ${L}px !important;
          }
        `),()=>{R.contains(f)&&R.removeChild(f)}},[o]),l.jsx(V,{isPresent:o,childRef:x,sizeRef:C,pop:r,children:r===!1?e:n.cloneElement(e,{ref:v})})}const Y=({children:e,initial:o,isPresent:t,onExitComplete:i,custom:a,presenceAffectsLayout:r,mode:s,anchorX:x,anchorY:C,root:w})=>{const d=S(_),v=n.useId();let u=!0,h=n.useMemo(()=>(u=!1,{id:v,initial:o,isPresent:t,custom:a,onExitComplete:p=>{d.set(p,!0);for(const g of d.values())if(!g)return;i&&i()},register:p=>(d.set(p,!1),()=>d.delete(p))}),[t,d,i]);return r&&u&&(h={...h}),n.useMemo(()=>{d.forEach((p,g)=>d.set(g,!1))},[t]),n.useEffect(()=>{!t&&!d.size&&i&&i()},[t]),e=l.jsx(X,{pop:s==="popLayout",isPresent:t,anchorX:x,anchorY:C,root:w,children:e}),l.jsx(D.Provider,{value:h,children:e})};function _(){return new Map}const P=e=>e.key||"";function z(e){const o=[];return n.Children.forEach(e,t=>{n.isValidElement(t)&&o.push(t)}),o}const q=({children:e,custom:o,initial:t=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:r="sync",propagate:s=!1,anchorX:x="left",anchorY:C="top",root:w})=>{const[d,v]=K(s),u=n.useMemo(()=>z(e),[e]),h=s&&!d?[]:u.map(P),p=n.useRef(!0),g=n.useRef(u),y=S(()=>new Map),E=n.useRef(new Set),[M,L]=n.useState(u),[f,R]=n.useState(u);U(()=>{p.current=!1,g.current=u;for(let m=0;m<f.length;m++){const c=P(f[m]);h.includes(c)?(y.delete(c),E.current.delete(c)):y.get(c)!==!0&&y.set(c,!1)}},[f,h.length,h.join("-")]);const $=[];if(u!==M){let m=[...u];for(let c=0;c<f.length;c++){const j=f[c],I=P(j);h.includes(I)||(m.splice(c,0,j),$.push(j))}return r==="wait"&&$.length&&(m=$),R(z(m)),L(u),null}const{forceRender:H}=n.useContext(A);return l.jsx(l.Fragment,{children:f.map(m=>{const c=P(m),j=s&&!d?!1:u===f||h.includes(c),I=()=>{if(E.current.has(c))return;if(E.current.add(c),y.has(c))y.set(c,!0);else return;let k=!0;y.forEach(W=>{W||(k=!1)}),k&&(H?.(),R(g.current),s&&v?.(),i&&i())};return l.jsx(Y,{isPresent:j,initial:!p.current||t?void 0:!1,custom:o,presenceAffectsLayout:a,mode:r,root:w,onExitComplete:j?void 0:I,anchorX:x,anchorY:C,children:m},c)})})};function Q(){const[e,o]=n.useState(!0),[t,i]=n.useState(0);return n.useEffect(()=>{const a=setInterval(()=>{i(s=>s>=100?(clearInterval(a),setTimeout(()=>o(!1),300),100):s+Math.random()*15)},100),r=setTimeout(()=>{i(100),o(!1)},2e3);return()=>{clearInterval(a),clearTimeout(r)}},[]),l.jsx(q,{children:e&&l.jsxs(b.div,{className:"fixed inset-0 bg-[#0a0a0a] z-[9999] flex flex-col items-center justify-center",initial:{opacity:1},exit:{opacity:0,transition:{duration:.5,ease:[.4,0,.2,1]}},children:[l.jsx(b.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"mb-8",children:l.jsxs("svg",{className:"w-16 h-16 text-white",viewBox:"0 0 100 100",fill:"currentColor",children:[l.jsx("circle",{cx:"50",cy:"30",r:"20",opacity:"0.8"}),l.jsx("rect",{x:"45",y:"45",width:"10",height:"40",opacity:"0.8"})]})}),l.jsx(b.h1,{className:"text-white text-2xl font-light tracking-[0.3em] uppercase mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:"Troweled Earth"}),l.jsx("div",{className:"w-48 h-[2px] bg-white/10 overflow-hidden",children:l.jsx(b.div,{className:"h-full bg-[#8b7355]",initial:{width:0},animate:{width:`${Math.min(t,100)}%`},transition:{duration:.1}})}),l.jsx(b.p,{className:"text-white/40 text-xs uppercase tracking-widest mt-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Loading experience"})]})})}export{Q as default};
